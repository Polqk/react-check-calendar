{"version":3,"file":"index.js","sources":["../src/Left.tsx","../src/Right.tsx","../src/defaults.ts","../src/context.tsx","../src/helpers.ts","../src/RowHeader.tsx","../src/ColumnDate.tsx","../src/CheckBox/index.tsx","../src/index.tsx"],"sourcesContent":["import * as React from 'react';\r\n\r\ninterface Props {\r\n}\r\n\r\nconst Left: React.FC<Props> = () => (\r\n  <svg\r\n    height={30}\r\n    viewBox=\"0 0 320 512\"\r\n  >\r\n    <path\r\n      d=\"M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49\r\n      256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-\r\n      9.37-9.37-9.37-24.57 0-33.94z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nexport default Left;\r\n","import * as React from 'react';\r\n\r\ninterface Props {\r\n}\r\n\r\nconst Right: React.FC<Props> = () => (\r\n  <svg\r\n    height={30}\r\n    viewBox=\"0 0 320 512\"\r\n  >\r\n    <path\r\n      d=\"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522\r\n      -.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373\r\n       33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z\"\r\n    />\r\n  </svg>\r\n);\r\n\r\nexport default Right;\r\n","import {CheckCalendarContext, CheckCalendarProps, DatesFormats} from \"./types\";\r\n\r\nexport const defaultProps: CheckCalendarProps = {\r\n  startWeekDay: 1,\r\n  locale: 'en',\r\n  hoursIntervals: [\r\n    { start: 8, end: 10 },\r\n    { start: 10, end: 12 },\r\n    { start: 13, end: 15 },\r\n    { start: 15, end: 17 }\r\n  ],\r\n  hideDays: [0, 6]\r\n};\r\n\r\nexport const defaultContext: CheckCalendarContext = {\r\n  props: defaultProps\r\n};\r\n\r\nexport const defaultDatesFormats: DatesFormats = {\r\n  fromHour: '[from] [<strong>]h:mm[</strong>][<small>]a[</small>]',\r\n  toHour: ' [to] [<strong>]h:mm[</strong>][<small>]a[</small>]'\r\n};\r\n","import * as React from 'react';\r\nimport { CheckCalendarContext } from \"./types\";\r\nimport {defaultContext} from \"./defaults\";\r\n\r\nconst CheckContext = React.createContext<CheckCalendarContext>(defaultContext);\r\nexport const CheckContextProvider = CheckContext.Provider;\r\nexport default CheckContext;\r\n","import moment from 'moment';\nimport {CheckCalendarProps, MomentOrDateRange, MomentRange} from \"./types\";\nimport { defaultDatesFormats } from \"./defaults\";\n\nexport const getMomentFromNumber = (date: moment.Moment, value: number) => {\n  const trunced =  Math.trunc(value);\n  return date.clone()\n    .set('hour', trunced)\n    .set('minutes', (value - trunced) * 60)\n    .set('second', 0)\n    .set('millisecond', 0);\n};\n\nexport const getDatesFormats = (props: CheckCalendarProps) =>\n  ({ ...defaultDatesFormats, ...props.datesFormats });\n\nexport const getArrayDates = (start: moment.Moment, count: number) => {\n  const dates = []\n\n  const clonedStart = start.clone().set('hour', 0).set('minute', 0).set('second', 1).set('millisecond', 0);\n\n  for (let i = 0; i < count; i++) {\n    dates.push(clonedStart.clone().add(i, 'day'));\n  }\n\n  return dates;\n};\n\nexport const isInInterval = (interval1: MomentOrDateRange, interval2: MomentOrDateRange) => {\n  const { start, end } = getMomentsFromRange(interval1);\n  const { start: start2, end: end2 } = getMomentsFromRange(interval2);\n\n  return start.isSame(start2, \"minute\") ||\n    end.isSame(end2, \"minute\") ||\n    start.isBetween(start2, end2, 'minutes', '()') ||\n    end.isBetween(start2, end2, 'minutes', '()');\n}\n\nexport const getMomentsFromRange = (interval: MomentOrDateRange): MomentRange => ({\n  start: getMomentFromDate(interval.start),\n  end: getMomentFromDate(interval.end)\n})\n\nexport const getMomentFromDate = (date: Date | moment.Moment | string) =>\n  date instanceof moment ? date as moment.Moment : moment(date);\n","import * as React from 'react';\r\nimport {HourInterval} from \"./types\";\r\nimport {getDatesFormats, getMomentFromNumber} from \"./helpers\";\r\nimport HTMLParser from \"html-react-parser\";\r\nimport CheckContext from \"./context\";\r\nimport moment from \"moment\";\r\nimport classNames from \"classnames\";\r\n\r\ninterface Props {\r\n  interval: HourInterval;\r\n}\r\n\r\nconst RowHeader: React.FC<Props> = ({ interval }) => {\r\n  const { props } = React.useContext(CheckContext);\r\n  const { start, end } = interval;\r\n  const { fromHour, toHour } = getDatesFormats(props);\r\n\r\n  if (props.renderRowHeader) {\r\n    return props.renderRowHeader(interval);\r\n  }\r\n\r\n  return (\r\n      <td className={classNames('check-calendar__row-header', props.headerRowClassName)}>\r\n        <div className=\"check-calendar__hour\">\r\n          {start && HTMLParser(`<span>${\r\n            getMomentFromNumber(moment(), start).format(fromHour)\r\n              .replace(fromHour.charAt(fromHour.indexOf('mm') - 1) + '00', '') || ''}</span>`)}\r\n          {end && HTMLParser(`<span>${\r\n            getMomentFromNumber(moment(), end).format(toHour)\r\n              .replace(fromHour.charAt(fromHour.indexOf('mm') - 1) + '00', '') || ''\r\n          }</span>`)}\r\n        </div>\r\n      </td>\r\n  )\r\n}\r\n\r\nexport default RowHeader;\r\n","import * as React from 'react';\r\nimport Moment from \"react-moment\";\r\nimport * as moment from \"moment\";\r\nimport CheckContext from \"./context\";\r\n\r\ninterface Props {\r\n  date: moment.Moment;\r\n}\r\n\r\nconst ColumnDate: React.FC<Props> = ({ date }) => {\r\n  const { props } = React.useContext(CheckContext);\r\n\r\n  if (props.renderColumnHeader) {\r\n    return props.renderColumnHeader(date);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <Moment\r\n          className=\"check-calendar_day\"\r\n          locale={props?.locale}\r\n          format=\"ddd\"\r\n        >\r\n          {date}\r\n        </Moment>\r\n      </div>\r\n      <div>\r\n        <Moment\r\n          className=\"check-calendar__day-number\"\r\n          locale=\"fr\"\r\n          format=\"DD\"\r\n        >\r\n          {date}\r\n        </Moment>\r\n      </div>\r\n      <div>\r\n        <Moment\r\n          className=\"check-calendar__month\"\r\n          locale=\"fr\"\r\n          format=\"MMM\"\r\n        >\r\n          {date}\r\n        </Moment>\r\n      </div>\r\n      <div\r\n        // class=\"d-optionDetails\"\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ColumnDate;\r\n","import * as React from 'react';\r\nimport './checkbox.css';\r\nimport classNames from 'classnames';\r\nimport {MomentRange} from \"../types\";\r\nimport {getMomentFromDate} from \"../helpers\";\r\nimport CheckContext from \"../context\";\r\n\r\nexport type CheckBoxChangeHandler = (value: boolean, props: Props) => void;\r\ntype CheckboxProps = {\r\n  ref?: any;\r\n  onChange: CheckBoxChangeHandler;\r\n  interval: MomentRange;\r\n}\r\n\r\ntype InputProps = Omit<React.InputHTMLAttributes<HTMLInputElement>, 'onChange'>;\r\ntype Props = CheckboxProps & InputProps;\r\n\r\nconst Checkbox: React.FC<Props> = ({interval, ...props}) => {\r\n  const {props: { disableBefore, disableAfter, disabledDates } } = React.useContext(CheckContext);\r\n\r\n  const _handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const value = e.target.checked;\r\n    props.onChange(value, {...props, checked: value, value: value ? 0 : 1, interval })\r\n  };\r\n\r\n  const isBeforeDisabled = disableBefore ? interval.end.isBefore(getMomentFromDate(disableBefore)) : false;\r\n  const isAfterDisabled = disableAfter ? interval.start.isAfter(getMomentFromDate(disableAfter)) : false;\r\n  const isDisabledDate = Array.isArray(disabledDates)\r\n    ? disabledDates.some(d => getMomentFromDate(d).isBetween(interval.start, interval.end))\r\n    : false;\r\n\r\n  const disabled = props.disabled || isBeforeDisabled || isAfterDisabled || isDisabledDate;\r\n  return (\r\n    <label className={classNames('check-calendar-checkbox__wrapper', { disabled }, props.className)}>\r\n      <span className=\"check-calendar-checkbox\">\r\n        <input\r\n          {...props}\r\n          onChange={_handleChange}\r\n          className={classNames('check-calendar-checkbox__input')}\r\n          type=\"checkbox\"\r\n          disabled={disabled}\r\n        />\r\n      <span className=\"check-calendar-checkbox__inner\" />\r\n    </span>\r\n    </label>\r\n  );\r\n}\r\n\r\nexport default Checkbox;\r\n","import * as React from 'react';\nimport {CheckCalendarProps, CheckCalendarState, MomentRange} from \"./types\";\nimport LeftIcon from \"./Left\";\nimport RightIcon from \"./Right\";\nimport classNames from \"classnames\";\nimport { defaultProps } from \"./defaults\";\nimport { CheckContextProvider } from \"./context\";\nimport RowHeader from \"./RowHeader\";\nimport moment from \"moment\";\nimport ColumnDate from \"./ColumnDate\";\nimport {getArrayDates, getMomentFromNumber, getMomentsFromRange, isInInterval} from \"./helpers\";\nimport Checkbox, {CheckBoxChangeHandler} from \"./CheckBox\";\n\nimport './styles.css';\n\nclass CheckCalendar extends React.Component<CheckCalendarProps, CheckCalendarState> {\n  static defaultProps = defaultProps;\n\n  state = {\n    loading: false,\n    currentDate: moment(this.props.start).set('day', this.props.startWeekDay || 1),\n    checkedRanges: []\n  };\n\n  render() {\n    const {\n      hoursIntervals,\n      hideDays,\n      max,\n      min,\n      checkedDates,\n      leftButton,\n      rightButton,\n      containerClassName,\n      tableClassName,\n      headerClassName,\n      contentClassName\n    } = this.props;\n\n    const { loading, currentDate, checkedRanges } = this.state;\n    const dates = getArrayDates(currentDate, 7);\n    const checked = Array.isArray(checkedDates) ? checkedDates : checkedRanges;\n\n    const prevDisabled = loading || (!!min && dates[0].clone().set('hour', 0).isBefore(moment(min)));\n    const nextDisabled = loading || (!!max && dates[dates.length - 1].clone().set('hour', 23).isAfter(moment(max)));\n\n    console.log('max', (!!max && dates[dates.length - 1].clone().set('hour', 23).isAfter(moment(max))), 'min', !!min && dates[0].clone().set('hour', 0).isBefore(moment(min)));\n\n    return (\n      <CheckContextProvider value={{ props: this.props }}>\n        <div className={classNames('check-calendar', containerClassName)}>\n          <button\n            className={classNames(\n              'check-calendar__button check-calendar__prev',\n              leftButton?.className\n            )}\n            disabled={prevDisabled}\n            onClick={this._handlePrevious}\n          >\n            {leftButton?.content || <LeftIcon />}\n          </button>\n          <button\n            className={classNames(\n              'check-calendar__button check-calendar__next',\n              rightButton?.className\n            )}\n            disabled={nextDisabled}\n            onClick={this._handleNext}\n          >\n            {rightButton?.content || <RightIcon/>}\n          </button>\n          <div\n            className={classNames('check-calendar__container', {\n              'check-calendar__container--hide': loading\n            })}\n            ref=\"calendar\"\n          >\n            <table className={classNames('check-calendar__table', tableClassName)} >\n              <thead />\n              <tbody>\n              <tr className=\"check-calendar__header\">\n                <td\n                  key=\"header_empty\"\n                  className={classNames(headerClassName)}\n                />\n                {dates.map((current) => (\n                  <td\n                    key={`check-calendar-header-${current.format('YYYY_MM_DD')}`}\n                    className={classNames(headerClassName, { 'check-calendar__hidden': hideDays?.includes(current.day()) })}\n                  >\n                    <ColumnDate date={current} />\n                  </td>\n                ))}\n              </tr>\n              {hoursIntervals && hoursIntervals.map((row) => (\n                <tr key={`${row.start}_${row.end}`}>\n                  <RowHeader interval={row} />\n                  {dates.map(day => {\n                    const interval = {\n                      start: getMomentFromNumber(day, row.start),\n                      end: getMomentFromNumber(day, row.end)\n                    };\n\n                    return (\n                      <td\n                        key={`${day.format('YYYY_MM_DD')}_${interval.start}_${interval.end}`}\n                        className={classNames(contentClassName, { 'check-calendar__hidden': hideDays?.includes(day.day()) })}\n                      >\n                        <Checkbox\n                          interval={interval}\n                          onChange={this._handleChange}\n                          checked={!!(checked).find(c => isInInterval(c, interval))}\n                          value=\"off\"\n                        />\n                      </td>\n                    )\n                  })}\n                </tr>\n              ))}\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </CheckContextProvider>\n    );\n  }\n\n  _handlePrevious = () => {\n    this.setState({ loading:true });\n    setTimeout(() => {\n      this.setState({\n        loading:false,\n        currentDate: this.state.currentDate.subtract(7, 'days')\n      }, this.props.onPreviousClick);\n\n    }, 400);\n\n  };\n\n  _handleNext = () => {\n    this.setState({ loading: true });\n\n    setTimeout(() => {\n      this.setState({\n        loading: false,\n        currentDate: this.state.currentDate.add(7, 'days')\n      }, this.props.onNextClick);\n    }, 400);\n  };\n\n  _handleChange: CheckBoxChangeHandler = ( value, props) => {\n    const { checkedRanges } = this.state;\n    const { interval } = props;\n    const { onChange, checkedDates } = this.props;\n    let newChecked = [...(Array.isArray(checkedDates) ? checkedDates : checkedRanges)];\n\n    if (value) {\n      newChecked.push(interval);\n    } else {\n      const foundIndex = newChecked.findIndex((c) => isInInterval(c, interval));\n\n      if (foundIndex > -1) {\n        newChecked.splice(foundIndex, 1);\n      }\n    }\n\n    newChecked = newChecked.map(i => getMomentsFromRange(i));\n\n    if (onChange) {\n      onChange({\n        dates: (newChecked as MomentRange[]).map(i => ({ start: i.start.toDate(), end: i.end.toDate() })) ,\n        moments: newChecked as MomentRange[]\n      })\n    }\n\n    if (!Array.isArray(checkedDates)) {\n      this.setState({ checkedRanges: newChecked as MomentRange[] });\n    }\n  };\n\n}\n\nexport {\n  CheckCalendar as default,\n  CheckCalendar,\n  CheckCalendarProps,\n  defaultProps,\n  LeftIcon,\n  RightIcon,\n  Checkbox\n}\n"],"names":["Left","React","height","viewBox","d","Right","defaultProps","startWeekDay","locale","hoursIntervals","start","end","hideDays","defaultContext","props","defaultDatesFormats","fromHour","toHour","CheckContext","CheckContextProvider","Provider","getMomentFromNumber","date","value","trunced","Math","trunc","clone","set","getDatesFormats","datesFormats","getArrayDates","count","dates","clonedStart","i","push","add","isInInterval","interval1","interval2","getMomentsFromRange","start2","end2","isSame","isBetween","interval","getMomentFromDate","moment","RowHeader","renderRowHeader","className","classNames","headerRowClassName","HTMLParser","format","replace","charAt","indexOf","ColumnDate","renderColumnHeader","Moment","Checkbox","disableBefore","disableAfter","disabledDates","_handleChange","e","target","checked","onChange","isBeforeDisabled","isBefore","isAfterDisabled","isAfter","isDisabledDate","Array","isArray","some","disabled","type","CheckCalendar","loading","currentDate","checkedRanges","setState","setTimeout","state","subtract","onPreviousClick","onNextClick","checkedDates","newChecked","foundIndex","findIndex","c","splice","map","toDate","moments","render","max","min","leftButton","rightButton","containerClassName","tableClassName","headerClassName","contentClassName","prevDisabled","nextDisabled","length","console","log","onClick","_handlePrevious","content","LeftIcon","_handleNext","RightIcon","ref","key","current","includes","day","row","find"],"mappings":"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"}